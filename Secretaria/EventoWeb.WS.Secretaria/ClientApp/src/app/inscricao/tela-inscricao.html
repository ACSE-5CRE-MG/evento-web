<layout-geral>
  <mat-toolbar layout-geral-cabecalho color="primary">
    <button mat-icon-button (click)="clicarVoltar()">
      <i class="fas fa-arrow-left"></i>
    </button>
    <span class="fas fa-users" style="margin-right:10px"></span>
    <span>Manutenção de Inscrição</span>
    <span style="flex: 1 1 auto;"></span>
    <button type="button" mat-button (click)="clicarAceitar()" *ngIf="inscricao.Situacao == 1">
      Aceitar
    </button>
    <button type="button" mat-button (click)="clicarRejeitar()" style="margin-left: 5px" *ngIf="inscricao.Situacao == 1">
      Rejeitar
    </button>
    <button type="button" mat-button (click)="clicarAtualizar()" style="margin-left: 5px" *ngIf="inscricao.Situacao == 2 || inscricao.Situacao == 3">
      Atualizar
    </button>
    <button type="button" mat-button (click)="clicarCompletarAceitar()" style="margin-left: 5px" *ngIf="inscricao.Situacao == 0">
      Completar e Aceitar
    </button>
  </mat-toolbar>
  <div fxLayout="row wrap" fxLayoutGap="5px" fxLayoutAlign="center start">
    <div class="cartao margem-5px" fxLayout="column" fxFlex="48" fxFlex.sm="90" fxFlex.xs="100">
      <mat-card-title>Dados Inscrição</mat-card-title>
      <mat-divider></mat-divider>
      <dx-validation-group id="grupoValidacaoEssencial" name="grupoValidacaoEssencial" #grupoValidacaoEssencial fxLayout="row" fxLayoutGap="5px" fxFill fxLayoutAlign="center start">
        <div class="margem-5px" fxFlex="100" fxLayout="column" fxLayoutGap="5px">
          <div fxLayout="column" fxLayoutGap="5px" fxLayoutGap.xs="5px">
            <div fxLayout="row" fxLayoutGap="5px" fxLayoutGap.xs="5px" fxLayoutAlign="start center">
              <label class="label_campos" fxFlex="106px">Tipo Inscrição:</label>
              <dx-radio-group [items]="dadosTela.TiposInscricao"
                              [(value)]="dadosTela.tipoInscricaoEscolhida"
                              layout="horizontal"
                              >
                <dx-validator>
                  <dxi-validation-rule type="required" message="Você não escolheu o tipo de inscrição."></dxi-validation-rule>
                </dx-validator>
              </dx-radio-group>
            </div>
            <div fxLayout="row" fxLayoutGap="5px" fxLayoutGap.xs="5px" fxLayoutAlign="start center">
              <div class="label_campos" fxFlex="106px"></div>
              <div>
                O Tipo de inscrição <strong>Participante</strong> se refere a toda pessoa que irá apenas participar do evento. Ela não tem nenhuma atividade de coordenação de salas ou oficinas, e não atua nas diversas equipes do evento, como música, cozinha, etc.
                <br />
                Já o tipo de inscrição <strong>Participante/Trabalhador</strong> se refere a pessoa que pode ser coordenadora de sala, oficina e/ou coordenador ou participante de uma das equipes do evento como a música, cozinha, etc.
              </div>
            </div>
          </div>
          <div fxLayout="row" fxLayoutGap="5px" fxLayoutGap.xs="5px" fxLayoutAlign="start center">
            <label class="label_campos" fxFlex="106px">Nome:</label>
            <dx-text-box [(value)]="dadosTela.nome" fxFlex="100" [maxLength]="150">
              <dx-validator>
                <dxi-validation-rule type="required" message="Você não informou o nome."></dxi-validation-rule>
              </dx-validator>
            </dx-text-box>
          </div>
          <div fxLayout="row" fxLayoutGap="5px" fxLayoutGap.xs="5px" fxLayoutAlign="start center">
            <label class="label_campos" fxFlex="106px">Nome Crachá:</label>
            <dx-text-box [(value)]="dadosTela.nomeCracha" fxFlex="100" [maxLength]="150">
            </dx-text-box>
          </div>
          <div fxLayout="row" fxLayoutGap="5px" fxLayoutGap.xs="5px" fxLayoutAlign="start center">
            <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="5px">
              <label class="label_campos" fxFlex="106px">Nascimento:</label>
              <dx-date-box [(value)]="dadosTela.dataNascimento" type="date" >
                <dx-validator>
                  <dxi-validation-rule type="required" message="Você não informou o nome a data de nascimento"></dxi-validation-rule>
                  <dxi-validation-rule type="range" [max]="dadosTela.dataMinimaNascimento" message="Sua idade deve ser, no mínimo, de {{dadosTela.idadeMinima}} anos"></dxi-validation-rule>
                </dx-validator>
              </dx-date-box>
              <label>{{"(" + dadosTela.idade + " anos)"}}</label>
            </div>
          </div>
          <div fxLayout="row" fxLayoutGap="5px" fxLayoutGap.xs="5px" fxLayoutAlign="start center">
            <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="5px">
              <label class="label_campos" fxFlex="106px">Sexo:</label>
              <dx-radio-group [items]="dadosTela.Sexos"
                              [(value)]="this.dadosTela.sexoEscolhido"
                              layout="horizontal"
                              >
                <dx-validator>
                  <dxi-validation-rule type="required" message="Você não escolheu o sexo."></dxi-validation-rule>
                </dx-validator>
              </dx-radio-group>
            </div>
          </div>
          <div fxLayout="column" fxLayoutGap="5px" fxLayoutGap.xs="5px">
            <div fxLayout="row" fxLayoutGap="5px" fxLayoutGap.xs="5px" fxLayoutAlign="start center">
              <label class="label_campos" fxFlex="106px">E-mail:</label>
              <dx-text-box [(value)]="dadosTela.email" fxFlex="60" [maxLength]="100">
                <dx-validator>
                  <dxi-validation-rule type="required" message="Você não informou o e-mail."></dxi-validation-rule>
                  <dxi-validation-rule type="email" message="Você informou um email que não é válido"></dxi-validation-rule>
                </dx-validator>
              </dx-text-box>
            </div>
            <div fxLayout="row" fxLayoutGap="5px" fxLayoutGap.xs="5px" fxLayoutAlign="start center">
              <div class="label_campos" fxFlex="106px"></div>
              <div>
                Você precisa informar um e-mail válido, pois para ele será enviado informações sobre o evento, bem como o código para permitir acesso ao andamento e alterações na sua inscrição.
              </div>
            </div>
          </div>
          <div fxLayout="row" fxLayoutGap="5px" fxLayoutGap.xs="5px" fxLayoutAlign="start center">
            <label class="label_campos" fxFlex="106px">Cidade/UF:</label>
            <dx-text-box [(value)]="dadosTela.cidade" fxFlex="80" [maxLength]="100">
              <dx-validator>
                <dxi-validation-rule type="required" message="Você não informou a Cidade."></dxi-validation-rule>
              </dx-validator>
            </dx-text-box>
            <dx-select-box [dataSource]="dadosTela.EstadosFederacao"
                           [searchMode]="'contains'"
                           [searchTimeout]="200"
                           [minSearchLength]="0"
                           [searchEnabled]="true"
                           [(value)]="dadosTela.uf"
                           fxFlex="20"
                           >
              <dx-validator>
                <dxi-validation-rule type="required" message="Você não informou a UF."></dxi-validation-rule>
              </dx-validator>
            </dx-select-box>
          </div>
          <div fxLayout="column" fxLayoutGap="5px" fxLayoutGap.xs="5px">
            <div fxLayout="row" fxLayoutGap="5px" fxLayoutGap.xs="5px" fxLayoutAlign="start center">
              <label class="label_campos" fxFlex="106px">Celular:</label>
              <dx-text-box [(value)]="dadosTela.celular" fxFlex="60"  [maxLength]="15">
              </dx-text-box>
            </div>
          </div>
          <div fxLayout="column" fxLayoutGap="5px" fxLayoutGap.xs="5px">
            <div fxLayout="row" fxLayoutGap="5px" fxLayoutGap.xs="5px" fxLayoutAlign="start center">
              <label class="label_campos" fxFlex="106px">Tel. Fixo:</label>
              <dx-text-box [(value)]="dadosTela.telefoneFixo" fxFlex="60" [maxLength]="15">
              </dx-text-box>
            </div>
          </div>
        </div>
      </dx-validation-group>
      <mat-divider></mat-divider>
      <div class="margem-5px" fxFlex="100" fxLayout="column" fxLayoutGap="5px">
        <div fxLayout="row wrap" fxLayoutGap="5px" fxLayoutGap.xs="5px" fxLayoutAlign="start center">
          <div fxFlex="106px"></div>
          <dx-check-box [(value)]="dadosTela.ehVegetariano" text="É Vegetariano?" ></dx-check-box>
          <dx-check-box [(value)]="dadosTela.usaAdocanteDiariamente" text="Usa adoçante diariamente?" ></dx-check-box>
          <dx-check-box [(value)]="dadosTela.ehDiabetico" text="É diabético?" ></dx-check-box>
        </div>
        <div fxLayout="row" fxLayoutGap="5px" fxLayoutGap.xs="5px" fxLayoutAlign="start center">
          <label class="label_campos" fxFlex="106px">Carnes que você não come:</label>
          <dx-text-box [(value)]="dadosTela.carnesNaoCome" fxFlex="100" [maxLength]="150">
          </dx-text-box>
        </div>
        <div fxLayout="row" fxLayoutGap="5px" fxLayoutGap.xs="5px" fxLayoutAlign="start center">
          <label class="label_campos" fxFlex="106px">Alimentos que você tem alergia:</label>
          <dx-text-box [(value)]="dadosTela.alimentosAlergia" fxFlex="100" [maxLength]="100">
          </dx-text-box>
        </div>
        <div fxLayout="row" fxLayoutGap="5px" fxLayoutGap.xs="5px" fxLayoutAlign="start center">
          <label class="label_campos" fxFlex="106px">Medicamentos que você usa:</label>
          <dx-text-box [(value)]="dadosTela.medicamentosUsa" fxFlex="100" [maxLength]="150">
          </dx-text-box>
        </div>
      </div>
      <mat-divider></mat-divider>
      <dx-validation-group id="grupoValidacaoEspirita" name="grupoValidacaoEspirita" #grupoValidacaoEspirita fxLayout="row" fxLayoutGap="5px" fxFill fxLayoutAlign="center start">
        <div class="margem-5px" fxFlex="100" fxLayout="column" fxLayoutGap="5px">
          <div fxLayout="row" fxLayoutGap="5px" fxLayoutGap.xs="5px" fxLayoutAlign="start center">
            <label class="label_campos" fxFlex="106px">Centro Espírita:</label>
            <dx-text-box [(value)]="dadosTela.centroEspirita" fxFlex="100" [maxLength]="300">
              <dx-validator>
                <dxi-validation-rule type="required" message="Você não informou o Centro Espírita que frequenta."></dxi-validation-rule>
              </dx-validator>
            </dx-text-box>
          </div>
          <div fxLayout="row" fxLayoutGap="5px" fxLayoutGap.xs="5px" fxLayoutAlign="start center">
            <label class="label_campos" fxFlex="106px">Tempo que é espírita:</label>
            <dx-text-box [(value)]="dadosTela.tempoEspirita" fxFlex="40" [maxLength]="20">
              <dx-validator>
                <dxi-validation-rule type="required" message="Você não informou o tempo que é espírita."></dxi-validation-rule>
              </dx-validator>
            </dx-text-box>
            <dx-check-box [(value)]="dadosTela.primeiroEncontro"
                          [width]="80"
                          fxFlex="40"
                          text="Primeiro Encontro?"
                          ></dx-check-box>
          </div>
          <div fxLayout="row" fxLayoutGap="5px" fxLayoutGap.xs="5px" fxLayoutAlign="start center">
            <label class="label_campos" fxFlex="106px">Nome Responsável Casa Espírita:</label>
            <dx-text-box [(value)]="dadosTela.nomeResponsavelCentro" fxFlex="100" [maxLength]="150">
              <dx-validator>
                <dxi-validation-rule type="required" message="Você não informou o responsável pela Casa Espírita ou pela reunião que você frequenta."></dxi-validation-rule>
              </dx-validator>
            </dx-text-box>
          </div>
          <div fxLayout="row" fxLayoutGap="5px" fxLayoutGap.xs="5px" fxLayoutAlign="start center">
            <label class="label_campos" fxFlex="106px">Telefone Responsável Casa Espírita:</label>
            <dx-text-box [(value)]="dadosTela.telefoneResponsavelCentro" fxFlex="60" [maxLength]="15">
              <dx-validator>
                <dxi-validation-rule type="required" message="Você não informou o telefone do responsável pela Casa Espírita ou pela reunião que você frequenta."></dxi-validation-rule>
              </dx-validator>
            </dx-text-box>
          </div>
          <mat-divider></mat-divider>
          <div fxLayout="row" fxLayoutGap="5px" fxLayoutGap.xs="5px" fxLayoutAlign="start center">
            <label class="label_campos" fxFlex="106px">Nome Responsável Legal:</label>
            <dx-text-box [(value)]="dadosTela.nomeResponsavelLegal" fxFlex="100" [disabled]="dadosTela.idade >= 18"  [maxLength]="150">
              <dx-validator>
                <dxi-validation-rule type="required" message="Você não informou o nome do responsável legal por você. Precisamos dessa informação já que você ainda não tem 18 anos."></dxi-validation-rule>
              </dx-validator>
            </dx-text-box>
          </div>
          <div fxLayout="row" fxLayoutGap="5px" fxLayoutGap.xs="5px" fxLayoutAlign="start center">
            <label class="label_campos" fxFlex="106px">Telefone Responsável Legal:</label>
            <dx-text-box [(value)]="dadosTela.telefoneResponsavelLegal" fxFlex="60" [disabled]="dadosTela.idade >= 18"  [maxLength]="15">
              <dx-validator>
                <dxi-validation-rule type="required" message="Você não informou o telefone do responsável legal por você. Precisamos dessa informação já que você ainda não tem 18 anos."></dxi-validation-rule>
              </dx-validator>
            </dx-text-box>
          </div>
        </div>
      </dx-validation-group>
    </div>
    <div class="cartao margem-5px" fxLayout="column" fxFlex="48" fxFlex.sm="90" fxFlex.xs="100"
         *ngIf="inscricao.Evento.TemOficinas || inscricao.Evento.ConfiguracaoSalaEstudo != null || inscricao.Evento.TemDepartamentalizacao || inscricao.Evento.ConfiguracaoTempoSarauMin != null">
      <mat-card-title>Participação em Atividades</mat-card-title>
      <mat-divider></mat-divider>
      <mat-tab-group>
        <mat-tab label="Oficinas" *ngIf="inscricao.Evento.TemOficinas">
          <comp-oficinas [desabilitar]="false" [oficinas]="inscricao.Evento.Oficinas" [forma]="dadosTela.formaEscolha" [(escolhido)]="dadosTela.oficinasEscolhidas"></comp-oficinas>
        </mat-tab>
        <mat-tab label="Estudo" *ngIf="inscricao.Evento.ConfiguracaoSalaEstudo != null">
          <comp-salas [desabilitar]="false" [salas]="inscricao.Evento.SalasEstudo" [forma]="dadosTela.formaEscolha" [configuracaoSala]="inscricao.Evento.ConfiguracaoSalaEstudo" [(escolhido)]="dadosTela.salasEscolhidas"></comp-salas>
        </mat-tab>
        <mat-tab label="Departamentos" *ngIf="inscricao.Evento.TemDepartamentalizacao">
          <comp-departamentos [desabilitar]="NaoEhIncompleta" [departamentos]="inscricao.Evento.Departamentos" [forma]="dadosTela.formaEscolha" [(valor)]="dadosTela.departamentoEscolhido"></comp-departamentos>
        </mat-tab>
        <mat-tab label="Sarau" *ngIf="inscricao.Evento.ConfiguracaoTempoSarauMin != null" style="padding: 5px">
          <comp-sarau [desabilitar]="false" [(valor)]="dadosTela.sarais" [inscrito]="dadosTela.inscricaoSimples"></comp-sarau>
        </mat-tab>
      </mat-tab-group>
    </div>
    <!--<div class="cartao margem-5px" fxLayout="column" fxFlex="48" fxFlex.sm="90" fxFlex.xs="100"
       *ngIf="inscricao.Evento.ConfiguracaoEvangelizacao != null &&
              (inscricao.Evento.ConfiguracaoEvangelizacao == 0 ||(inscricao.Evento.ConfiguracaoEvangelizacao == 1 && dadosTela.tipoInscricao == this.dadosTela.TiposInscricao[1]))">
    <mat-card-title>Crianças que você será responsável</mat-card-title>
    <mat-divider></mat-divider>
    <comp-criancas [desabilitar]="NaoEhIncompleta" [(valor)]="dadosTela.criancas" [inscrito]="inscricao"></comp-criancas>
  </div>-->
    <div class="cartao margem-5px" fxLayout="column" fxFlex="48" fxFlex.sm="90" fxFlex.xs="100">
      <mat-card-title>Informações sobre pagamentos</mat-card-title>
      <mat-divider></mat-divider>
      <comp-pagamento [(valor)]="dadosTela.pagamento"
                      [valorInscricao]="inscricao.Evento.ValorInscricaoAdulto"
                      [valorInscCrianca]="inscricao.Evento.ValorInscricaoCrianca"
                      [totalCriancas]="contarCriancasPrimeiroResponsavel()"
                      [desabilitar]="false"></comp-pagamento>
    </div>
    <div class="cartao margem-5px" fxLayout="column" fxFlex="48" fxFlex.sm="90" fxFlex.xs="100">
      <mat-card-title>Outras informações</mat-card-title>
      <mat-divider></mat-divider>
      <p>Você trará colchão de solteiro ou casal? Se for de casal dividirá com quem?</p>
      <p>Ou nos fale de alguma outra informação que você ache pertinente e não encontrou lugar na inscrição. Este campo esta aberto para podermos te ouvir!</p>
      <dx-text-area [height]="180"
                    [(value)]="dadosTela.observacoes"
                    >
      </dx-text-area>
    </div>
  </div>
</layout-geral>
